<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lectureMapper">
  	<resultMap id="lectureResult" type="Lecture">
  		<result column="class_no" property="classNo"/>
  		<result column="class_title" property="classTitle"/>
  		<result column="create_date" property="createDate"/>
  		<result column="thumbnail" property="thumbnail"/>
  		<result column="intro_file" property="introFile"/>
  		<result column="intro_title" property="introTitle"/>
  		<result column="intro_content" property="introContent"/>
  		<result column="status" property="status"/>
  		<result column="period" property="period"/>
  		<result column="need" property="need"/>
  		<result column="note" property="note"/>
  		<result column="pos_term" property="posTerm"/>
  		<result column="price" property="price"/>
  		<result column="subcat_no" property="subcatNo"/>
  		<result column="user_no" property="userNo"/>
		<result column="count" property="fundingCount"/>
		<result column="nickname" property="teacherName"/>
  	</resultMap>
  	
  	<resultMap id="studingResult" type="Studing">
		<result column="user_no" property="userNo"/>
		<result column="class_no" property="classNo"/>
		<result column="start_date" property="startDate"/>
		<result column="end_date" property="endDate"/>
		<result column="video_no" property="videoNo"/>
	</resultMap>
	
	<resultMap type="ScrapSupport" id="scrapResult">
		<result column="user_no" property="userNo"/>
		<result column="class_no" property="classNo"/>
		<result column="type" property="type"/>
		<result column="scrap_date" property="scrapDate"/>
	</resultMap>
  	
  	<!-- 
  		@author HeeRak
  		월별정산_ 한 강사의 모든 클래스번호, 이름 조회 
  	-->
  	<select id="selectTeacherClassAll" resultMap="lectureResult">
  		select
  			   class_no
  			 , class_title
  		  from lecture
  		 where user_no = #{userNo}
  		   and status = 'O'
  		 order
  		    by create_date asc
  	</select>
  	
  	<!-- 
		@author leeyeji
		펀딩 클래스 페이징	
	 -->
	 <select id="selectFundingCount" resultType="_int">
	 	select
	 		   count(*)
	 	  from class_funding 
	 </select>
	
	<!-- 
		@author leeyeji
		펀딩 클래스 조회용
	 -->
	<select id="selectFundingList" resultMap="lectureResult">
		select 
               class_no
             , thumbnail
             , class_title
             , create_date
             , f.count
             , t.nickname
          from lecture l
          join class_funding f using(class_no)
          join teacher t on(l.user_no = t.teacher_no)
         where l.status = 'F'
         order 
            by create_date desc
	</select>
  	
</mapper>
